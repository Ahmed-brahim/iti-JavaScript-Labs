<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Table with Pagination</title>
    <link rel="stylesheet" href="index.css">
    <script src="index.js"></script>
</head>
<body>
    <div class="container">
        <h1>Data Table</h1>
        
        <!-- Search Container -->
        <div class="search-container">
            <input type="text" id="search-input" class="search-input" placeholder="Search in all columns...">
            <button id="search-button" class="search-button">Search</button>
            <button id="clear-search" class="clear-search">Clear</button>
        </div>
        
        <div class="table-controls">
            <div class="page-info">
                Showing <span id="start-record">1</span> to <span id="end-record">10</span> of <span id="total-records">0</span> records
            </div>
            <div class="rows-per-page">
                <label for="rows-select">Rows per page:</label>
                <select id="rows-select">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="25">25</option>
                    <option value="50">50</option>
                </select>
            </div>
        </div>
        
        <div class="table-wrapper">
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>User Id</th>
                            <th>Id</th>
                            <th>Title</th>
                            <th>Body</th>
                        </tr>
                    </thead>
                    <tbody id="table-body">
                        <!-- Table data will be populated by JavaScript -->
                        <tr>
                            <td colspan="5" style="text-align: center;">No data available</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="loading-overlay" id="loading-overlay">
                <div class="spinner"></div>
            </div>
        </div>
        
        <div class="pagination" id="pagination">
            <button id="prev-page" disabled>&laquo; Previous</button>
            <div id="page-numbers">
                <button class="active">1</button>
            </div>
            <button id="next-page">Next &raquo;</button>
        </div>
    </div>

    <script>
        // You can add your JavaScript code here to fetch data from the API
        // This is just a placeholder for the structure
        
        // Example of how you might structure your JavaScript:
        /*
        let currentPage = 1;
        let rowsPerPage = 10;
        let totalRecords = 0;
        let searchQuery = '';
        let allData = []; // Optional: Store all data locally for client-side filtering
        
        // Function to fetch data from API
        async function fetchData(page, limit, query = '') {
            // Show loading state
            document.getElementById('loading-overlay').style.display = 'flex';
            
            try {
                // Replace with your API endpoint
                // Add search query parameter if provided
                const url = `https://your-api.com/data?page=${page}&limit=${limit}${query ? `&search=${query}` : ''}`;
                const response = await fetch(url);
                const data = await response.json();
                
                // Update total records
                totalRecords = data.total;
                
                // Render the data
                renderTable(data.items);
                
                // Update pagination
                updatePagination();
                
            } catch (error) {
                console.error('Error fetching data:', error);
            } finally {
                // Hide loading state
                document.getElementById('loading-overlay').style.display = 'none';
            }
        }
        
        // Alternative: Client-side search implementation
        // This is useful if you want to search without making API calls
        async function fetchAllData() {
            try {
                const response = await fetch('https://your-api.com/data?limit=1000'); // Get all or a large batch
                const data = await response.json();
                allData = data.items;
                return allData;
            } catch (error) {
                console.error('Error fetching all data:', error);
                return [];
            }
        }
        
        function searchClientSide(query) {
            if (!query) {
                // If query is empty, reset to show all data
                const paginatedData = paginateData(allData, currentPage, rowsPerPage);
                renderTable(paginatedData);
                totalRecords = allData.length;
                updatePagination();
                return;
            }
            
            // Convert query to lowercase for case-insensitive search
            query = query.toLowerCase();
            
            // Filter the data based on the search query
            const filteredData = allData.filter(item => {
                // Search in all properties of the item
                return Object.values(item).some(value => 
                    String(value).toLowerCase().includes(query)
                );
            });
            
            // Update total records based on filtered data
            totalRecords = filteredData.length;
            
            // Reset to first page when searching
            currentPage = 1;
            
            // Paginate the filtered data
            const paginatedData = paginateData(filteredData, currentPage, rowsPerPage);
            
            // Render the filtered and paginated data
            renderTable(paginatedData);
            
            // Update pagination controls
            updatePagination();
        }
        
        function paginateData(data, page, limit) {
            const startIndex = (page - 1) * limit;
            const endIndex = startIndex + limit;
            return data.slice(startIndex, endIndex);
        }
        
        // Function to render table data
        function renderTable(items) {
            const tableBody = document.getElementById('table-body');
            
            if (items.length === 0) {
                tableBody.innerHTML = '<tr><td colspan="5" style="text-align: center;">No data available</td></tr>';
                return;
            }
            
            let html = '';
            items.forEach(item => {
                html += `
                    <tr>
                        <td>${item.id}</td>
                        <td>${item.name}</td>
                        <td>${item.email}</td>
                        <td>${item.status}</td>
                        <td>${item.date}</td>
                    </tr>
                `;
            });
            
            tableBody.innerHTML = html;
        }
        
        // Function to update pagination controls
        function updatePagination() {
            const totalPages = Math.ceil(totalRecords / rowsPerPage);
            const startRecord = totalRecords === 0 ? 0 : (currentPage - 1) * rowsPerPage + 1;
            const endRecord = Math.min(currentPage * rowsPerPage, totalRecords);
            
            document.getElementById('start-record').textContent = startRecord;
            document.getElementById('end-record').textContent = endRecord;
            document.getElementById('total-records').textContent = totalRecords;
            
            document.getElementById('prev-page').disabled = currentPage === 1;
            document.getElementById('next-page').disabled = currentPage === totalPages || totalPages === 0;
            
            // Generate page number buttons
            const pageNumbers = document.getElementById('page-numbers');
            pageNumbers.innerHTML = '';
            
            // Logic to show a reasonable number of page buttons
            const maxButtons = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxButtons / 2));
            let endPage = Math.min(totalPages, startPage + maxButtons - 1);
            
            if (endPage - startPage + 1 < maxButtons) {
                startPage = Math.max(1, endPage - maxButtons + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                if (i === currentPage) {
                    button.classList.add('active');
                }
                button.addEventListener('click', () => {
                    currentPage = i;
                    
                    // If using server-side search
                    fetchData(currentPage, rowsPerPage, searchQuery);
                    
                    // If using client-side search
                    // const paginatedData = paginateData(
                    //     searchQuery ? allData.filter(...) : allData, 
                    //     currentPage, 
                    //     rowsPerPage
                    // );
                    // renderTable(paginatedData);
                    // updatePagination();
                });
                pageNumbers.appendChild(button);
            }
        }
        
        // Event listeners
        document.getElementById('prev-page').addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                fetchData(currentPage, rowsPerPage, searchQuery);
                // Or for client-side: searchClientSide(searchQuery);
            }
        });
        
        document.getElementById('next-page').addEventListener('click', () => {
            const totalPages = Math.ceil(totalRecords / rowsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                fetchData(currentPage, rowsPerPage, searchQuery);
                // Or for client-side: searchClientSide(searchQuery);
            }
        });
        
        document.getElementById('rows-select').addEventListener('change', (e) => {
            rowsPerPage = parseInt(e.target.value);
            currentPage = 1;
            fetchData(currentPage, rowsPerPage, searchQuery);
            // Or for client-side: searchClientSide(searchQuery);
        });
        
        // Search functionality
        document.getElementById('search-button').addEventListener('click', () => {
            const searchInput = document.getElementById('search-input');
            searchQuery = searchInput.value.trim();
            currentPage = 1; // Reset to first page when searching
            
            // Server-side search
            fetchData(currentPage, rowsPerPage, searchQuery);
            
            // Or for client-side search:
            // searchClientSide(searchQuery);
        });
        
        // Clear search
        document.getElementById('clear-search').addEventListener('click', () => {
            const searchInput = document.getElementById('search-input');
            searchInput.value = '';
            searchQuery = '';
            currentPage = 1; // Reset to first page
            
            // Fetch data without search query
            fetchData(currentPage, rowsPerPage);
            
            // Or for client-side:
            // searchClientSide('');
        });
        
        // Optional: Search on Enter key press
        document.getElementById('search-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('search-button').click();
            }
        });
        
        // Initial data fetch
        // For server-side search only:
        fetchData(currentPage, rowsPerPage);
        
        // For client-side search, you might want to fetch all data initially:
        // fetchAllData().then(() => {
        //     const paginatedData = paginateData(allData, currentPage, rowsPerPage);
        //     renderTable(paginatedData);
        //     totalRecords = allData.length;
        //     updatePagination();
        // });
        */
    </script>
</body>
</html>